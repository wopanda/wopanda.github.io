{{- define "main" }}

<article class="post-single">
  <!-- ç§»é™¤é‡å¤çš„æ ‡é¢˜æ˜¾ç¤º -->

  <!-- çŸ¥è¯†åœ°å›¾å†…å®¹åŒºåŸŸ -->
  <div class="post-content">
    {{- if .Content }}
    <div class="knowledge-intro">
      {{ .Content }}
    </div>
    {{- end }}
    
    <!-- çŸ¥è¯†åœ°å›¾å®¹å™¨ -->
    <div id="knowledge-map-container">
      <div class="knowledge-loading">
        ğŸ§  æ­£åœ¨åŠ è½½çŸ¥è¯†åœ°å›¾...
      </div>
    </div>
  </div>

</article>

<!-- å¼•å…¥çŸ¥è¯†åœ°å›¾çš„CSSå’ŒJSï¼ˆé™„å¸¦ç‰ˆæœ¬å‚æ•°ï¼Œé¿å…ç¼“å­˜ï¼‰ -->
{{- $ver := (now.Unix) -}}
<link rel="stylesheet" href="/css/knowledge-map.css?v={{$ver}}">
<script src="/js/knowledge-map-renderer.js?v={{$ver}}"></script>
<script>
  // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–çŸ¥è¯†åœ°å›¾
  document.addEventListener('DOMContentLoaded', function() {
    if (typeof KnowledgeMapRenderer !== 'undefined') {
      const renderer = new KnowledgeMapRenderer('knowledge-map-container');
      renderer.init();
    }
  });
</script>

{{- end }}{{/* end main */}}
